<template>
  <div class="layout-container">
    <!-- å¤´éƒ¨åŒºåŸŸ -->
    <van-nav-bar :title="activeTitle" />

    <!-- å†…å®¹åŒºåŸŸ -->
    <router-view></router-view>

    <!-- åº•éƒ¨åŒºåŸŸ -->
    <van-tabbar v-model="active" route>
      <van-tabbar-item icon="home-o" replace to="/layout/home"
        >é¦–é¡µ</van-tabbar-item
      >
      <van-tabbar-item icon="search" replace to="/layout/search"
        >æœç´¢</van-tabbar-item
      >
    </van-tabbar>
  </div>
</template>
<script>
export default {
  name: 'comLayout',
  data() {
    return {
      active: 0, // é»˜è®¤é€‰ä¸­çš„æ ‡ç­¾
      activeTitle: this.$route.meta.title // ä½¿ç”¨åŠ¨æ€çš„titleå€¼
    }
  },
  watch: {
    // bugè§£å†³:
    // å› ä¸ºä½¿ç”¨vantçš„<van-tabbar>ç»„ä»¶çš„ @change="onChange" ç›‘å¬äº‹ä»¶ä¸­å‚æ•°æ— æ³•ä¸ºactiveTitleç›´æ¥èµ‹å€¼
    // å¯¼è‡´activeTitleåœ¨searchå­ç»„ä»¶ä¸­åˆ·æ–°åå§‹ç»ˆæ˜¯åŒä¸€ä¸ªå›ºå®šçš„é™æ€å€¼'é¦–é¡µ'çš„bug
    // è§£å†³æ–¹æ¡ˆ:ğŸš©
    // ä¸ä»<van-tabbar>ç»„ä»¶çš„nameå±æ€§ä¸­è·å–titleæ•°æ®ï¼Œè½¬è€Œä»è·¯ç”±ä¸­è·å–åŠ¨æ€çš„titleæ•°æ®
    $route: function () {
      this.activeTitle = this.$route.meta.title
    }
  },
  methods: {}
}
</script>
<style lang="less" scoped></style>
